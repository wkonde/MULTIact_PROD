<?xml version="1.0" encoding="UTF-8"?>
<templates id="pos_product_bundle_pack_template" inherit_id="point_of_sale.template" xml:space="preserve">
 
	<!-- Product WIdget -->
	<t t-extend="Product" t-inherit="point_of_sale.ProductItem" t-inherit-mode="extension" owl="1">	
		<xpath expr="//div[hasclass('product-img')]" position="inside">
			<t t-if="props.product.is_pack">
				<div class="product-bundle-pack" style="position: absolute; box-sizing: border-box; bottom: 0;top: 65px; line-height: 15px; width: 100%; height: 30px; overflow: hidden; text-overflow: ellipsis; background: #FD142A; color: #fff; padding: 3px; padding-top: 5px;">
				Pack Product
				</div>
			</t>
		</xpath>
	</t>

   
	<!-- Orderline WIdget -->
	<t t-extend="Orderlineextend" t-inherit="point_of_sale.Orderline" t-inherit-mode="extension" owl="1">
		<xpath expr="//li[hasclass('info')]" position="after">
			<t t-if="props.line.get_product_bundle_pack_data()">
				<ul class="info-list">
					<t t-foreach="props.line.get_product_bundle_pack_data()" t-as="orderline">
						<span class="product-name">
							<t t-esc='orderline.product.display_name' />
						</span>
						<li class="info">
							<em>
								<t t-esc='orderline.product.qty_uom' />
							</em>
							<t t-esc='orderline.product.uom_id[1]' />
							at
							<t t-esc='env.pos.format_currency(orderline.product.price)' />
							/
							 <t t-esc='orderline.product.uom_id[1]' />
						</li>
					</t>
				</ul>
			</t>
		</xpath>
	</t>

	<t t-extend="OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
		<xpath expr="//div[hasclass('orderlines')]" position="replace">

			<div class="orderlines">
				<t t-foreach="receipt.orderlines" t-as="line" t-key="line.id">
					<t t-if="isSimple(line)">
						<div>
							<t t-esc="line.product_name_wrapped[0]" />
							<span t-esc="env.pos.format_currency_no_symbol(line.price_display)" class="price_display pos-receipt-right-align"/>
						</div>
						<WrappedProductNameLines line="line" />
					</t>
					<t t-else="">
						<div t-esc="line.product_name_wrapped[0]" />
						<WrappedProductNameLines line="line" />
						<t t-if="line.display_discount_policy == 'without_discount' and line.price != line.price_lst">
							<div class="pos-receipt-left-padding">
								<t t-esc="env.pos.format_currency_no_symbol(line.price_lst)" />
								->
								<t t-esc="env.pos.format_currency_no_symbol(line.price)" />
							</div>
						</t>
						<t t-elif="line.discount !== 0">
							<div class="pos-receipt-left-padding">
								<t t-if="env.pos.config.iface_tax_included === 'total'">
									<t t-esc="env.pos.format_currency_no_symbol(line.price_with_tax_before_discount)"/>
								</t>
								<t t-else="">
									<t t-esc="env.pos.format_currency_no_symbol(line.price)"/>
								</t>
							</div>
						</t>
						<t t-if="line.discount !== 0">
							<div class="pos-receipt-left-padding">
								Discount: <t t-esc="line.discount" />%
							</div>
						</t>
						<div class="pos-receipt-left-padding">
							<t t-esc="Math.round(line.quantity * Math.pow(10, env.pos.dp['Product Unit of Measure'])) / Math.pow(10, env.pos.dp['Product Unit of Measure'])"/>
							<t t-if="!line.is_in_unit" t-esc="line.unit_name" />
							x
							<t t-esc="env.pos.format_currency_no_symbol(line.price_display_one)" />
							<span class="price_display pos-receipt-right-align">
								<t t-esc="env.pos.format_currency_no_symbol(line.price_display)" />
							</span>
						</div>
					</t>
					<t t-if="line.pack_lot_lines">
						<div class="pos-receipt-left-padding">
							<ul>
								<t t-foreach="line.pack_lot_lines" t-as="lot" t-key="lot.cid">
									<li>
										SN <t t-esc="lot.attributes['lot_name']"/>
									</li>
								</t>
							</ul>
						</div>
					</t>
					<t t-if="env.pos.config.bundle_print == 'with_products'">
						<t t-if="line.get_product_bundle_pack">
							<ul class="info-list" style="font-size: 15px;font-family: auto;margin-left: 5%;">
								<t t-foreach="line.get_product_bundle_pack" t-as="line">
									<span class="product-name">
										<t t-esc='line.product.display_name' />
									</span>
									<li class="info" style="margin-left: 10%;">
										<t t-esc='line.product.qty_uom' />
										<t t-esc='line.product.uom_id[1]' />
										 at
										<t t-esc='env.pos.format_currency(line.product.price)' />
									</li>
								  </t>
							</ul>
						</t>
					</t>
				</t>
			</div>

			

		</xpath>
	</t>

</templates>
	
	
